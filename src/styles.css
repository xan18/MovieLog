@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --accent-rgb: 96, 165, 250;
  --radius-sm: 12px;
  --radius-md: 16px;
  --radius-lg: 24px;
  --panel-radius: 24px;
  --panel-border: rgba(255,255,255,0.1);
  --panel-bg-soft: rgba(255,255,255,0.04);
  --panel-shadow: 0 14px 35px rgba(0,0,0,0.25);
  --control-height: 46px;
  --focus-ring: 0 0 0 2px rgba(var(--accent-rgb), 0.36);
}

html, body { overflow-x: hidden; }
    * {
      scrollbar-width: thin;
      scrollbar-color: rgba(var(--accent-rgb),0.65) rgba(148,163,184,0.2);
    }
    *::-webkit-scrollbar { width: 10px; height: 10px; }
    *::-webkit-scrollbar-track { background: rgba(148,163,184,0.15); border-radius: 9999px; }
    *::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, rgba(var(--accent-rgb),0.8), rgba(var(--accent-rgb),0.55));
      border-radius: 9999px;
      border: 1px solid rgba(2,6,23,0.45);
    }
    *::-webkit-scrollbar-thumb:hover { background: rgba(var(--accent-rgb),0.9); }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    body {
      transition: background-color 0.5s ease;
      color: white;
      padding-bottom: 120px;
      font-family: "Segoe UI", "SF Pro Display", "Inter", system-ui, sans-serif;
      min-height: 100vh;
    }
    .view-stack { display: grid; gap: clamp(1.1rem, 2.2vw, 1.5rem); }
    :is(button, input, textarea, select, [role="button"], .ctrl-select, .settings-lang-choice):focus-visible {
      outline: none;
      box-shadow: var(--focus-ring);
      border-color: rgba(var(--accent-rgb),0.68) !important;
    }
    .app-shell { color: inherit; }
    .app-topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
      padding: 0.85rem clamp(16px, 3.6vw, 56px) 1rem;
      border-bottom: 1px solid rgba(255,255,255,0.08);
      position: sticky;
      top: 0;
      z-index: 85;
      backdrop-filter: blur(14px);
      background: linear-gradient(180deg, rgba(28, 32, 38, 0.68), rgba(28, 32, 38, 0.42));
      width: auto;
      margin-left: calc(50% - 50vw);
      margin-right: calc(50% - 50vw);
    }
    .app-nav-wrap {
      display: inline-flex;
      gap: 0.35rem;
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 14px;
      padding: 4px;
      background: rgba(255,255,255,0.03);
    }
    .app-nav-btn {
      min-height: var(--control-height);
      padding: 10px 14px;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 700;
      opacity: 0.7;
      transition: all 0.18s ease;
    }
    .app-nav-btn:hover { opacity: 1; background: rgba(255,255,255,0.08); }
    .app-nav-btn.active {
      opacity: 1;
      background: rgba(255,255,255,0.14);
      border: 1px solid rgba(255,255,255,0.22);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.18);
    }
    .app-page-title {
      font-size: clamp(2rem, 4.8vw, 3.2rem);
      font-weight: 900;
      letter-spacing: -0.02em;
      line-height: 1;
    }
    .app-switch-wrap {
      display: inline-flex;
      gap: 6px;
      padding: 5px;
      border-radius: var(--radius-md);
      background: var(--panel-bg-soft);
      border: 1px solid rgba(255,255,255,0.12);
    }
    .app-switch-btn {
      min-height: var(--control-height);
      border-radius: var(--radius-sm);
      padding: 10px 18px;
      font-size: 14px;
      font-weight: 700;
      opacity: 0.65;
      transition: all 0.18s ease;
    }
    .app-switch-btn.active {
      opacity: 1;
      background: rgba(255,255,255,0.16);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.2);
    }
    .catalog-controls {
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: var(--radius-lg);
      background: rgba(255,255,255,0.03);
      padding: 14px;
      display: grid;
      gap: 12px;
      box-shadow: var(--panel-shadow);
    }
    .shelf-pill {
      min-height: var(--control-height);
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.04);
      border-radius: var(--radius-sm);
      padding: 10px 14px;
      font-size: 12px;
      font-weight: 700;
      letter-spacing: 0.02em;
      white-space: nowrap;
      opacity: 0.78;
      transition: all 0.18s ease;
    }
    .shelf-pill.active {
      opacity: 1;
      background: rgba(255,255,255,0.16);
      border-color: rgba(255,255,255,0.3);
    }

    /* Themes */
    .theme-dark { background-color: #181818; color: #f3f4f6; --accent-rgb: 161,161,170; --accent-solid: #52525b; }
    .theme-night { background-color: #0f172a; color: #e2e8f0; --accent-rgb: 96,165,250; --accent-solid: #2563eb; }
    .theme-black { background-color: #000000; color: #fff; --accent-rgb: 212,212,216; --accent-solid: #52525b; }
    .theme-light { background-color: #f1f5f9; color: #0f172a; --accent-rgb: 51,65,85; --accent-solid: #334155; }

    .glass { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(20px); }
    .app-panel { border-radius: var(--panel-radius); border: 1px solid var(--panel-border); overflow: hidden; }
    .app-panel-padded { border-radius: var(--panel-radius); border: 1px solid var(--panel-border); }
    .theme-dark .glass {
      background: rgba(31, 31, 31, 0.92);
      border-color: rgba(255,255,255,0.12) !important;
    }
    .theme-night .glass {
      background: rgba(15, 23, 42, 0.88);
      border-color: rgba(148,163,184,0.24) !important;
    }
    .theme-black .glass {
      background: rgba(0, 0, 0, 0.92);
      border-color: rgba(255,255,255,0.1) !important;
    }
    .theme-dark .modal-overlay { background: rgba(24, 24, 24, 0.95); }
    .theme-night .modal-overlay { background: rgba(8, 13, 27, 0.95); }
    .theme-black .modal-overlay { background: rgba(0,0,0,0.97); }
    .theme-light .glass { background: rgba(255, 255, 255, 0.85); border-color: rgba(0,0,0,0.08) !important; }
    .theme-light .modal-overlay { background: rgba(255,255,255,0.97); }
    .theme-black .tag { background: rgba(255,255,255,0.03); border-color: rgba(255,255,255,0.08); color: #f1f5f9; }
    .theme-black .seg-btn { background: rgba(255,255,255,0.03); border-color: rgba(255,255,255,0.08); color: #f1f5f9; }
    .theme-black .seg-btn.active { background: rgba(255,255,255,0.12); border-color: rgba(255,255,255,0.22); color: #fff; }
    .theme-dark .tag { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.12); color: #e5e7eb; }
    .theme-dark .seg-btn { background: rgba(31,31,31,0.94); border-color: rgba(255,255,255,0.12); color: #e5e7eb; }
    .theme-dark .seg-btn.active { background: rgba(255,255,255,0.16); border-color: rgba(255,255,255,0.28); color: #ffffff; }
    .theme-night .tag { background: rgba(var(--accent-rgb),0.12); border-color: rgba(var(--accent-rgb),0.25); color: #dbeafe; }
    .theme-night .seg-btn { background: rgba(30,41,59,0.72); border-color: rgba(100,116,139,0.26); color: #cbd5e1; }
    .theme-night .seg-btn.active { background: rgba(var(--accent-rgb),0.32); border-color: rgba(var(--accent-rgb),0.5); color: #eff6ff; }
    .theme-light .tag { background: rgba(0,0,0,0.05); border-color: rgba(0,0,0,0.1); color: #1e293b; }
    .theme-light .seg-btn { background: rgba(0,0,0,0.04); border-color: rgba(0,0,0,0.1); color: #1e293b; }
    .theme-light .seg-btn.active { background: rgba(var(--accent-rgb),0.15); border-color: rgba(var(--accent-rgb),0.4); color: rgba(var(--accent-rgb),0.95); }
    .theme-black .active-shelf { color: #f8fafc; border-bottom-color: #f8fafc; }
    .theme-dark .active-shelf { color: #f3f4f6; border-bottom-color: #f3f4f6; }
    .theme-night .active-shelf { color: rgba(var(--accent-rgb),0.95); border-bottom-color: rgba(var(--accent-rgb),0.95); }
    .theme-light .active-shelf { color: rgba(var(--accent-rgb),0.95); border-bottom-color: rgba(var(--accent-rgb),0.95); }
    .theme-dark input, .theme-dark select, .theme-dark .ctrl-select { background: rgba(31,31,31,0.96) !important; border-color: rgba(255,255,255,0.14) !important; color: #f9fafb !important; }
    .theme-dark input::placeholder { color: rgba(255,255,255,0.35) !important; }
    .theme-night input, .theme-night select, .theme-night .ctrl-select { background: rgba(30,41,59,0.75) !important; border-color: rgba(100,116,139,0.32) !important; color: #e2e8f0 !important; }
    .theme-night input::placeholder { color: rgba(203,213,225,0.5) !important; }
    .theme-black input, .theme-black select, .theme-black .ctrl-select { background: rgba(255,255,255,0.03) !important; border-color: rgba(255,255,255,0.1) !important; color: #f8fafc !important; }
    .theme-black input::placeholder { color: rgba(255,255,255,0.3) !important; }
    .theme-light input, .theme-light select, .theme-light .ctrl-select { background: rgba(0,0,0,0.04) !important; border-color: rgba(0,0,0,0.1) !important; color: #1e293b !important; }
    .theme-light input::placeholder { color: rgba(0,0,0,0.35) !important; }
    .theme-black .ep-btn { background: rgba(255,255,255,0.03); border-color: rgba(255,255,255,0.08); color: #e2e8f0; }
    .theme-black .ep-watched { background: rgba(16,185,129,0.16); border-color: rgba(16,185,129,0.34); color: #34d399; }
    .theme-dark .ep-btn { background: rgba(31,31,31,0.95); border-color: rgba(255,255,255,0.12); color: #e5e7eb; }
    .theme-dark .ep-watched { background: rgba(16,185,129,0.16); border-color: rgba(16,185,129,0.34); color: #34d399; }
    .theme-night .ep-btn { background: rgba(30,41,59,0.75); border-color: rgba(100,116,139,0.3); color: #cbd5e1; }
    .theme-night .ep-watched { background: rgba(16,185,129,0.16); border-color: rgba(16,185,129,0.34); color: #34d399; }
    .theme-light .ep-btn { background: rgba(0,0,0,0.04); border-color: rgba(0,0,0,0.1); color: #1e293b; }
    .theme-light .ep-watched { background: rgba(16,185,129,0.12); border-color: rgba(16,185,129,0.3); color: #059669; }
    .modal-overlay { background: rgba(0, 0, 0, 0.97); backdrop-filter: blur(25px); }
    .ctrl-select-wrap {
      position: relative;
      width: 100%;
      min-width: 0;
    }
    .ctrl-select {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.65rem;
      min-height: var(--control-height);
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: var(--radius-md);
      padding: 0.78rem 0.95rem;
      font-size: 0.9rem;
      font-weight: 700;
      text-align: left;
      outline: none;
      transition: border-color 0.15s ease, box-shadow 0.15s ease, background 0.15s ease, transform 0.15s ease;
    }
    .ctrl-select:hover {
      border-color: rgba(var(--accent-rgb),0.35) !important;
      background: rgba(var(--accent-rgb),0.08) !important;
    }
    .ctrl-select:focus-visible,
    .ctrl-select-wrap.open .ctrl-select {
      border-color: rgba(var(--accent-rgb),0.65) !important;
      box-shadow: 0 0 0 2px rgba(var(--accent-rgb),0.35);
    }
    .ctrl-select:disabled {
      opacity: 0.55;
      cursor: default;
    }
    .ctrl-select-label {
      min-width: 0;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .ctrl-select-chevron {
      width: 16px;
      height: 16px;
      opacity: 0.8;
      flex-shrink: 0;
      transition: transform 0.18s ease, opacity 0.18s ease;
    }
    .ctrl-select-wrap.open .ctrl-select-chevron {
      transform: rotate(180deg);
      opacity: 1;
    }
    .ctrl-select-menu {
      position: absolute;
      top: calc(100% + 8px);
      left: 0;
      right: 0;
      z-index: 140;
      max-height: min(22rem, 52vh);
      overflow-y: auto;
      border-radius: 16px;
      border: 1px solid rgba(148,163,184,0.34);
      background: rgba(2,6,23,0.94);
      backdrop-filter: blur(18px);
      box-shadow: 0 18px 34px rgba(2,6,23,0.58);
      padding: 6px;
      animation: popIn 0.15s ease;
    }
    .ctrl-select-menu::-webkit-scrollbar {
      width: 8px;
    }
    .ctrl-select-menu::-webkit-scrollbar-track {
      background: transparent;
    }
    .ctrl-select-menu::-webkit-scrollbar-thumb {
      background: rgba(148,163,184,0.45);
      border-radius: 9999px;
    }
    .ctrl-select-option {
      width: 100%;
      border: none;
      background: transparent;
      color: inherit;
      text-align: left;
      padding: 10px 12px;
      border-radius: 12px;
      font-size: 0.9rem;
      font-weight: 700;
      line-height: 1.25;
      transition: background 0.14s ease, color 0.14s ease, transform 0.14s ease;
      cursor: pointer;
    }
    .ctrl-select-option:hover {
      background: rgba(148,163,184,0.16);
    }
    .ctrl-select-option.active {
      background: rgba(var(--accent-rgb),0.28);
      color: rgb(239,246,255);
    }
    .theme-dark .ctrl-select-menu {
      background: rgba(12,12,12,0.95);
      border-color: rgba(255,255,255,0.14);
    }
    .theme-night .ctrl-select-menu {
      background: rgba(15,23,42,0.96);
      border-color: rgba(100,116,139,0.42);
    }
    .theme-black .ctrl-select-menu {
      background: rgba(0,0,0,0.98);
      border-color: rgba(255,255,255,0.12);
    }
    .theme-light .ctrl-select-menu {
      background: rgba(241,245,249,0.97);
      border-color: rgba(15,23,42,0.14);
      box-shadow: 0 14px 28px rgba(15,23,42,0.16);
    }
    .theme-light .ctrl-select-option:hover {
      background: rgba(15,23,42,0.08);
    }
    .theme-light .ctrl-select-option.active {
      background: rgba(var(--accent-rgb),0.16);
      color: rgba(15,23,42,0.94);
    }
    .accent-text { color: rgba(var(--accent-rgb), 0.95); }
    .app-input {
      min-height: var(--control-height);
      border-radius: var(--radius-md);
    }
    .app-input:focus {
      border-color: rgba(var(--accent-rgb),0.6);
      box-shadow: 0 0 0 2px rgba(var(--accent-rgb),0.28);
    }
    .tag { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 4px 10px; border-radius: 10px; font-size: 10px; font-weight: 600; text-transform: uppercase; }
    .scroll-x { display: flex; overflow-x: auto; gap: 12px; padding-bottom: 10px; }
    .rec-item { min-width: 110px; transition: transform 0.2s; cursor: pointer; }
    .rec-item:hover { transform: translateY(-5px); }
    .themed-x-scroll {
      scrollbar-width: thin;
      scrollbar-color: rgba(var(--accent-rgb), 0.85) rgba(148, 163, 184, 0.2);
    }
    .themed-x-scroll::-webkit-scrollbar {
      height: 10px;
    }
    .themed-x-scroll::-webkit-scrollbar-track {
      background: rgba(148, 163, 184, 0.14);
      border-radius: 9999px;
    }
    .themed-x-scroll::-webkit-scrollbar-thumb {
      background: linear-gradient(90deg, rgba(var(--accent-rgb), 0.86), rgba(var(--accent-rgb), 0.62));
      border-radius: 9999px;
      border: 1px solid rgba(2, 6, 23, 0.45);
    }
    .themed-x-scroll::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(90deg, rgba(var(--accent-rgb), 0.95), rgba(var(--accent-rgb), 0.72));
    }
    .franchise-header { margin-bottom: 10px; }
    .franchise-timeline {
      overflow-x: auto;
      overflow-y: hidden;
      padding-bottom: 12px;
    }
    .franchise-track {
      position: relative;
      display: flex;
      gap: 16px;
      min-width: max-content;
      padding: 6px 6px 2px;
    }
    .franchise-track::before {
      content: '';
      position: absolute;
      left: 18px;
      right: 18px;
      top: 54px;
      height: 2px;
      border-radius: 9999px;
      background: linear-gradient(90deg, rgba(34,211,238,0.46), rgba(100,116,139,0.25), rgba(34,211,238,0.22));
      pointer-events: none;
    }
    .franchise-card {
      width: 170px;
      border: none;
      background: transparent;
      color: inherit;
      padding: 0;
      text-align: left;
      position: relative;
      cursor: pointer;
      transition: transform 0.22s ease, opacity 0.22s ease;
    }
    .franchise-card::before {
      content: '';
      position: absolute;
      top: 54px;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 10px;
      height: 10px;
      border-radius: 9999px;
      border: 2px solid rgba(34,211,238,0.65);
      background: rgba(8, 12, 20, 0.95);
      box-shadow: 0 0 0 4px rgba(2, 6, 23, 0.72);
      z-index: 2;
      transition: all 0.22s ease;
    }
    .franchise-year-chip {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 58px;
      padding: 3px 9px;
      margin: 0 auto 18px;
      border-radius: 9999px;
      border: 1px solid rgba(148,163,184,0.48);
      background: rgba(15, 23, 42, 0.92);
      color: rgba(241,245,249,0.98);
      font-size: 11px;
      font-weight: 800;
      letter-spacing: 0.08em;
      text-shadow: 0 1px 1px rgba(2, 6, 23, 0.6);
      font-variant-numeric: tabular-nums;
      position: relative;
      left: 50%;
      transform: translateX(-50%);
      z-index: 4;
    }
    .franchise-order-chip {
      position: absolute;
      top: 72px;
      right: 8px;
      z-index: 3;
      padding: 2px 7px;
      border-radius: 9999px;
      border: 1px solid rgba(255,255,255,0.24);
      background: rgba(2, 6, 23, 0.7);
      color: rgba(241,245,249,0.95);
      font-size: 9px;
      font-weight: 800;
      letter-spacing: 0.03em;
    }
    .franchise-poster-wrap {
      position: relative;
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.13);
      background: rgba(255,255,255,0.04);
      box-shadow: 0 12px 26px rgba(2, 6, 23, 0.48);
    }
    .franchise-poster {
      width: 100%;
      aspect-ratio: 2 / 3;
      object-fit: cover;
      display: block;
      transition: transform 0.28s ease, filter 0.28s ease;
    }
    .franchise-poster-overlay {
      position: absolute;
      inset: auto 0 0 0;
      padding: 28px 10px 9px;
      background: linear-gradient(180deg, rgba(2, 6, 23, 0) 0%, rgba(2, 6, 23, 0.82) 58%, rgba(2, 6, 23, 0.95) 100%);
    }
    .franchise-title {
      font-size: 10px;
      font-weight: 900;
      line-height: 1.3;
      text-transform: uppercase;
      letter-spacing: 0.02em;
      color: rgba(248,250,252,0.97);
      text-shadow: 0 1px 2px rgba(2, 6, 23, 0.6);
    }
    .franchise-current-tag {
      display: inline-flex;
      margin-top: 8px;
      padding: 2px 8px;
      border-radius: 9999px;
      border: 1px solid rgba(34,211,238,0.42);
      background: rgba(34,211,238,0.14);
      color: rgba(103,232,249,0.98);
      font-size: 9px;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }
    .franchise-card:hover {
      transform: translateY(-4px);
    }
    .franchise-card:hover .franchise-poster {
      transform: scale(1.04);
      filter: saturate(1.06);
    }
    .franchise-card.current {
      cursor: default;
      transform: none;
    }
    .franchise-card.current::before {
      width: 12px;
      height: 12px;
      border-color: rgba(34,211,238,0.95);
      background: rgba(34,211,238,0.92);
      box-shadow: 0 0 0 4px rgba(8, 47, 73, 0.62);
    }
    .franchise-card.current .franchise-year-chip {
      border-color: rgba(34,211,238,0.72);
      background: rgba(8, 47, 73, 0.72);
      color: rgba(165,243,252,0.98);
    }
    .franchise-card.current .franchise-poster-wrap {
      border-color: rgba(34,211,238,0.78);
      box-shadow: 0 0 0 1px rgba(34,211,238,0.55), 0 16px 34px rgba(2, 6, 23, 0.56);
    }
    .franchise-card:disabled { opacity: 1; }
    .active-shelf { color: rgba(var(--accent-rgb),0.95); border-bottom: 3px solid rgba(var(--accent-rgb),0.95); }

    /* Media cards */
    .media-card {
      background: transparent;
      border: none;
      border-radius: 0;
      padding: 0;
      transition: transform 0.2s ease;
      box-shadow: none;
    }
    .media-card:hover {
      transform: translateY(-3px);
    }
    .media-poster {
      position: relative;
      margin-bottom: 12px;
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.08);
      isolation: isolate;
      box-shadow: 0 12px 26px rgba(0, 0, 0, 0.45);
    }
    .media-poster::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(2, 6, 23, 0.86), transparent 55%);
      opacity: 0.75;
      transition: opacity 0.2s ease;
      pointer-events: none;
    }
    .media-card:hover .media-poster::after { opacity: 1; }
    .media-title {
      font-weight: 700;
      font-size: 1.04rem;
      line-height: 1.28;
      margin-bottom: 5px;
      letter-spacing: 0.01em;
    }
    .media-meta {
      font-size: 1rem;
      opacity: 0.72;
      font-weight: 400;
      letter-spacing: 0.02em;
    }
    .media-pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      min-height: 24px;
      border-radius: 9999px;
      padding: 2px 9px;
      border: 1px solid rgba(255,255,255,0.22);
      font-size: 10px;
      font-weight: 900;
      line-height: 1;
      backdrop-filter: blur(6px);
    }
    .quick-action-trigger {
      position: absolute;
      right: 10px;
      bottom: 10px;
      width: 36px;
      height: 36px;
      border-radius: 9999px;
      border: 1px solid rgba(255,255,255,0.28);
      background: rgba(0,0,0,0.58);
      color: #fff;
      display: grid;
      place-items: center;
      z-index: 3;
      opacity: 0;
      transform: translateY(4px) scale(0.96);
      pointer-events: none;
      transition: transform 0.18s ease, background 0.18s ease, border-color 0.18s ease, opacity 0.18s ease;
      backdrop-filter: blur(6px);
    }
    .media-card:hover .quick-action-trigger,
    .media-card:focus-within .quick-action-trigger {
      opacity: 1;
      transform: translateY(0) scale(1);
      pointer-events: auto;
    }
    .quick-action-trigger:hover {
      transform: scale(1.06);
      background: rgba(var(--accent-rgb), 0.88);
      border-color: rgba(var(--accent-rgb), 0.95);
    }
    .theme-light .quick-action-trigger {
      background: rgba(15,23,42,0.72);
      border-color: rgba(255,255,255,0.5);
    }
    @media (hover: none) and (pointer: coarse) {
      .quick-action-trigger {
        opacity: 1;
        transform: none;
        pointer-events: auto;
      }
    }

    .theme-light .media-card { background: transparent; border: none; box-shadow: none; border-radius: 0; }
    .theme-light .media-card:hover { box-shadow: none; }
    .theme-light .media-poster { border-color: rgba(15, 23, 42, 0.1); }
    .theme-light .media-title { color: #0f172a; }
    .theme-light .media-meta { color: rgba(15, 23, 42, 0.65); opacity: 1; }
    .theme-light .themed-x-scroll {
      scrollbar-color: rgba(var(--accent-rgb), 0.78) rgba(15, 23, 42, 0.14);
    }
    .theme-light .themed-x-scroll::-webkit-scrollbar-track {
      background: rgba(15, 23, 42, 0.12);
    }
    .theme-light .themed-x-scroll::-webkit-scrollbar-thumb {
      border-color: rgba(255,255,255,0.85);
    }
    .theme-light .franchise-track::before {
      background: linear-gradient(90deg, rgba(var(--accent-rgb),0.38), rgba(148,163,184,0.34), rgba(var(--accent-rgb),0.2));
    }
    .theme-light .franchise-card::before {
      border-color: rgba(var(--accent-rgb), 0.58);
      background: rgba(255,255,255,0.98);
      box-shadow: 0 0 0 4px rgba(241,245,249,0.9);
    }
    .theme-light .franchise-year-chip {
      border-color: rgba(15,23,42,0.2);
      background: rgba(255,255,255,0.92);
      color: #334155;
    }
    .theme-light .franchise-order-chip {
      border-color: rgba(15,23,42,0.18);
      background: rgba(255,255,255,0.86);
      color: #334155;
    }
    .theme-light .franchise-poster-wrap {
      border-color: rgba(15,23,42,0.16);
      box-shadow: 0 10px 22px rgba(15, 23, 42, 0.16);
    }
    .theme-light .franchise-poster-overlay {
      background: linear-gradient(180deg, rgba(15,23,42,0) 0%, rgba(15,23,42,0.66) 62%, rgba(15,23,42,0.82) 100%);
    }
    .theme-light .franchise-card.current .franchise-poster-wrap {
      border-color: rgba(var(--accent-rgb),0.6);
      box-shadow: 0 0 0 1px rgba(var(--accent-rgb),0.3), 0 12px 24px rgba(15, 23, 42, 0.2);
    }
    .theme-light .franchise-card.current .franchise-year-chip {
      border-color: rgba(var(--accent-rgb),0.55);
      background: rgba(var(--accent-rgb),0.12);
      color: rgba(var(--accent-rgb), 0.98);
    }
    .theme-light .franchise-current-tag {
      border-color: rgba(var(--accent-rgb),0.4);
      background: rgba(var(--accent-rgb),0.12);
      color: rgba(var(--accent-rgb),0.95);
    }
    .theme-light .media-poster .group-hover\:opacity-100 p {
      color: #ffffff;
      text-shadow: 0 1px 2px rgba(0,0,0,0.65);
    }

    /* Details modal */
    .details-overlay {
      background:
        radial-gradient(120% 100% at 0% 0%, rgba(15, 23, 42, 0.35), transparent 58%),
        radial-gradient(120% 100% at 100% 0%, rgba(2, 6, 23, 0.3), transparent 62%),
        rgba(2, 6, 23, 0.42);
      backdrop-filter: blur(10px) saturate(0.9);
    }
    .details-surface {
      background:
        radial-gradient(130% 120% at 0% 100%, rgba(249, 115, 22, 0.14), transparent 58%),
        radial-gradient(120% 100% at 100% 0%, rgba(56, 189, 248, 0.1), transparent 56%),
        rgba(8, 12, 20, 0.78);
      border: 1px solid rgba(148, 163, 184, 0.26);
      box-shadow: 0 34px 90px rgba(2, 6, 23, 0.6);
      backdrop-filter: blur(22px);
    }
    .details-close {
      width: 44px;
      height: 44px;
      border-radius: 14px;
      padding: 0;
      background: rgba(15, 23, 42, 0.48);
      border: 1px solid rgba(255,255,255,0.2);
      color: #e2e8f0;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(8px);
      transition: background 0.2s ease, border-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
    }
    .details-close-icon {
      width: 18px;
      height: 18px;
      display: block;
      stroke: currentColor;
      stroke-width: 2.4;
      stroke-linecap: round;
    }
    .details-close:hover {
      background: rgba(30, 41, 59, 0.72);
      border-color: rgba(var(--accent-rgb),0.62);
      box-shadow: 0 8px 18px rgba(2, 6, 23, 0.35);
      transform: translateY(-1px);
    }
    .details-close:active {
      transform: translateY(0) scale(0.98);
    }
    .details-hero {
      border-bottom: 1px solid rgba(255,255,255,0.08);
      position: relative;
      isolation: isolate;
    }
    .details-hero-overlay {
      background:
        linear-gradient(180deg, rgba(2, 6, 23, 0.08) 0%, rgba(2, 6, 23, 0.34) 54%, rgba(2, 6, 23, 0.92) 100%),
        linear-gradient(90deg, rgba(2, 6, 23, 0.76) 0%, rgba(2, 6, 23, 0.22) 48%, rgba(2, 6, 23, 0.62) 100%);
    }
    .details-content {
      position: relative;
    }
    .details-hero-content {
      position: absolute;
      inset: 0;
      z-index: 2;
      display: flex;
      align-items: flex-start;
      padding: 52px clamp(18px, 3.5vw, 40px) 20px;
    }
    .details-hero-head {
      display: flex;
      align-items: flex-start;
      gap: 20px;
      width: min(100%, 920px);
    }
    .details-hero-head-in-hero { margin: 0; }
    .details-hero-head-flat { margin: 0 0 4px; }
    .details-hero-poster {
      width: 172px;
      aspect-ratio: 2 / 3;
      object-fit: cover;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.22);
      box-shadow: 0 22px 48px rgba(2, 6, 23, 0.58);
      flex-shrink: 0;
    }
    .details-hero-copy {
      flex: 1;
      min-width: 0;
      padding-top: 4px;
      max-width: 680px;
    }
    .details-hero-title {
      font-size: clamp(2.05rem, 4.4vw, 3.35rem);
      line-height: 0.98;
      font-weight: 900;
      letter-spacing: -0.02em;
      margin: 0 0 12px;
      text-shadow: 0 3px 12px rgba(2, 6, 23, 0.5);
    }
    .details-hero-stats {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      row-gap: 4px;
      column-gap: 8px;
      margin-bottom: 10px;
    }
    .details-hero-separator {
      color: rgba(203, 213, 225, 0.6);
      font-size: 10px;
      font-weight: 700;
      line-height: 1;
    }
    .details-hero-stat {
      font-size: clamp(0.98rem, 1.1vw, 1.28rem);
      font-weight: 650;
      color: rgba(226, 232, 240, 0.88);
    }
    .details-hero-stat.highlighted {
      color: #facc15;
    }
    .details-hero-genres {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .details-hero-genre {
      display: inline-flex;
      align-items: center;
      padding: 3px 10px;
      border-radius: 9999px;
      border: 1px solid rgba(255,255,255,0.24);
      background: rgba(255,255,255,0.14);
      color: rgba(241,245,249,0.95);
      font-size: 12px;
      font-weight: 700;
      line-height: 1.2;
      white-space: nowrap;
      backdrop-filter: blur(5px);
    }
    .details-panel {
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      border: 1px solid rgba(148, 163, 184, 0.24);
      border-radius: 20px;
      padding: 16px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.05), 0 18px 40px rgba(2, 6, 23, 0.35);
    }
    .details-section {
      border-top: 1px solid rgba(148, 163, 184, 0.24);
      padding-top: 20px;
    }
    .details-actions {
      background:
        radial-gradient(100% 140% at 0% 100%, rgba(var(--accent-rgb),0.1), transparent 65%),
        linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      border: 1px solid rgba(var(--accent-rgb),0.22);
      border-radius: 28px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.08), 0 18px 34px rgba(2, 6, 23, 0.32);
    }
    .accent-btn {
      background: rgba(var(--accent-rgb), 0.9);
      color: white;
    }
    .accent-btn:hover { background: rgba(var(--accent-rgb), 1); }
    .details-status-btn {
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.04);
      color: rgba(241,245,249,0.92);
    }
    .details-status-btn:hover {
      background: rgba(255,255,255,0.1);
      border-color: rgba(255,255,255,0.22);
    }
    .details-status-btn.is-active {
      background: linear-gradient(135deg, rgba(var(--accent-rgb), 0.42), rgba(var(--accent-rgb), 0.22));
      border-color: rgba(var(--accent-rgb), 0.72);
      color: #ffffff;
      box-shadow: 0 0 0 1px rgba(var(--accent-rgb),0.28), 0 14px 24px rgba(var(--accent-rgb),0.24);
    }
    .details-status-btn.is-disabled {
      border-color: rgba(255,255,255,0.06);
      background: rgba(255,255,255,0.05);
      color: rgba(255,255,255,0.4);
      cursor: not-allowed;
      box-shadow: none;
    }
    .details-status-btn.is-disabled:hover {
      background: rgba(255,255,255,0.05);
      border-color: rgba(255,255,255,0.06);
      transform: none;
    }
    .accent-soft {
      background: rgba(var(--accent-rgb), 0.2);
      border: 1px solid rgba(var(--accent-rgb), 0.34);
    }
    .accent-soft:hover { background: rgba(var(--accent-rgb), 0.28); }
    .settings-choice {
      border: 2px solid rgba(255,255,255,0.1);
      background: rgba(255,255,255,0.05);
    }
    .settings-choice.active {
      border-color: rgba(var(--accent-rgb),0.72);
      background: rgba(var(--accent-rgb),0.12);
      box-shadow: 0 0 0 1px rgba(var(--accent-rgb),0.14), 0 10px 24px rgba(var(--accent-rgb),0.12);
    }
    .settings-check {
      background: rgba(var(--accent-rgb),0.95);
      color: white;
    }
    .settings-lang-choice {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      width: 100%;
      min-height: 58px;
      padding: 10px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.04);
      transition: border-color 0.16s ease, background 0.16s ease, box-shadow 0.16s ease;
    }
    .settings-lang-choice:hover {
      border-color: rgba(255,255,255,0.24);
      background: rgba(255,255,255,0.07);
    }
    .settings-lang-choice.active {
      border-color: rgba(var(--accent-rgb),0.7);
      background: linear-gradient(180deg, rgba(var(--accent-rgb),0.2), rgba(var(--accent-rgb),0.1));
      box-shadow: 0 8px 20px rgba(var(--accent-rgb),0.18);
    }
    .settings-lang-main {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      min-width: 0;
    }
    .settings-lang-code {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 36px;
      height: 28px;
      padding: 0 8px;
      border-radius: 9999px;
      border: 1px solid rgba(148,163,184,0.5);
      background: rgba(15,23,42,0.38);
      font-size: 11px;
      font-weight: 900;
      letter-spacing: 0.06em;
    }
    .settings-lang-mark {
      width: 20px;
      height: 20px;
      border-radius: 9999px;
      border: 1px solid rgba(148,163,184,0.5);
      display: grid;
      place-items: center;
      font-size: 11px;
      font-weight: 900;
      color: transparent;
      transform: scale(0.9);
      transition: transform 0.16s ease, color 0.16s ease, background 0.16s ease, border-color 0.16s ease;
      flex-shrink: 0;
    }
    .settings-lang-choice.active .settings-lang-mark {
      color: #fff;
      background: rgba(var(--accent-rgb),0.95);
      border-color: rgba(var(--accent-rgb),0.95);
      transform: scale(1);
    }
    .settings-notice {
      border-radius: 14px;
      border: 1px solid rgba(148,163,184,0.35);
      padding: 10px 12px;
      font-size: 12px;
      font-weight: 700;
      text-align: center;
    }
    .settings-notice.success {
      border-color: rgba(34,197,94,0.4);
      background: rgba(34,197,94,0.14);
      color: rgb(134,239,172);
    }
    .settings-notice.error {
      border-color: rgba(239,68,68,0.42);
      background: rgba(239,68,68,0.14);
      color: rgb(252,165,165);
    }
    .settings-notice.info {
      border-color: rgba(var(--accent-rgb),0.45);
      background: rgba(var(--accent-rgb),0.16);
      color: rgb(191,219,254);
    }
    .settings-toggle {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 12px 14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.05);
      transition: border-color 0.16s ease, background 0.16s ease;
    }
    .settings-toggle:hover {
      border-color: rgba(255,255,255,0.22);
    }
    .settings-toggle.active {
      border-color: rgba(var(--accent-rgb),0.48);
      background: rgba(var(--accent-rgb),0.16);
    }
    .settings-toggle-copy {
      display: flex;
      flex-direction: column;
      gap: 2px;
      min-width: 0;
      text-align: left;
    }
    .settings-toggle-title {
      font-size: 12px;
      font-weight: 800;
      line-height: 1.2;
    }
    .settings-toggle-hint {
      font-size: 11px;
      opacity: 0.6;
      line-height: 1.2;
    }
    .settings-toggle-switch {
      width: 44px;
      height: 24px;
      border-radius: 9999px;
      border: 1px solid rgba(148,163,184,0.45);
      background: rgba(15,23,42,0.48);
      display: flex;
      align-items: center;
      padding: 2px;
      transition: background 0.16s ease, border-color 0.16s ease;
      flex-shrink: 0;
    }
    .settings-toggle-dot {
      width: 18px;
      height: 18px;
      border-radius: 9999px;
      background: rgba(226,232,240,0.95);
      transform: translateX(0);
      transition: transform 0.16s ease, background 0.16s ease;
    }
    .settings-toggle.active .settings-toggle-switch {
      background: rgba(var(--accent-rgb),0.65);
      border-color: rgba(var(--accent-rgb),0.72);
    }
    .settings-toggle.active .settings-toggle-dot {
      transform: translateX(20px);
      background: #fff;
    }
    .settings-preview-box {
      border-radius: 14px;
      border: 1px solid rgba(148,163,184,0.35);
      background: rgba(2,6,23,0.34);
      padding: 12px;
    }
    .accent-row {
      background: rgba(var(--accent-rgb), 0.16);
      border-color: rgba(var(--accent-rgb), 0.28);
    }
    .accent-row-mark { color: rgba(var(--accent-rgb), 0.95); }
    .mobile-nav-active {
      background: rgba(var(--accent-rgb), 0.92);
      color: white;
      box-shadow: 0 12px 26px rgba(var(--accent-rgb), 0.32);
    }
    .scroll-top-btn {
      background: rgba(var(--accent-rgb), 0.56);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.22);
      backdrop-filter: blur(10px);
    }
    .theme-light .scroll-top-btn {
      color: #f8fafc;
      border-color: rgba(15,23,42,0.18);
      box-shadow: 0 10px 24px rgba(15,23,42,0.18);
    }

    .theme-light .details-surface {
      background:
        radial-gradient(120% 100% at 0% 0%, rgba(var(--accent-rgb),0.08), transparent 55%),
        radial-gradient(120% 100% at 100% 0%, rgba(16,185,129,0.06), transparent 58%),
        rgba(255, 255, 255, 0.94);
      border-color: rgba(15, 23, 42, 0.14);
      box-shadow: 0 24px 60px rgba(15, 23, 42, 0.16);
    }
    .theme-light .details-overlay {
      background: rgba(241, 245, 249, 0.62);
      backdrop-filter: blur(10px);
    }
    .theme-light .details-close {
      background: rgba(255,255,255,0.8);
      border-color: rgba(15,23,42,0.14);
      color: #1e293b;
    }
    .theme-light .details-close:hover {
      background: rgba(255,255,255,0.96);
      border-color: rgba(var(--accent-rgb),0.36);
      box-shadow: 0 10px 20px rgba(15,23,42,0.12);
    }
    .theme-light .details-hero-overlay {
      background:
        linear-gradient(180deg, rgba(15, 23, 42, 0.0) 0%, rgba(15, 23, 42, 0.18) 58%, rgba(15, 23, 42, 0.62) 100%),
        linear-gradient(90deg, rgba(15, 23, 42, 0.42) 0%, rgba(15, 23, 42, 0.08) 55%, rgba(15, 23, 42, 0.32) 100%);
    }
    .theme-light .details-hero-poster {
      border-color: rgba(15,23,42,0.2);
      box-shadow: 0 16px 32px rgba(15, 23, 42, 0.2);
    }
    .theme-light .details-hero-title {
      color: #f8fafc;
      text-shadow: 0 2px 10px rgba(15, 23, 42, 0.38);
    }
    .theme-light .details-hero-stat {
      color: rgba(241,245,249,0.92);
    }
    .theme-light .details-hero-genre {
      border-color: rgba(241,245,249,0.4);
      background: rgba(255,255,255,0.24);
      color: #f8fafc;
    }
    .theme-light .details-panel {
      background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,255,255,0.86));
      border-color: rgba(15, 23, 42, 0.12);
      box-shadow: 0 14px 30px rgba(15, 23, 42, 0.12);
    }
    .theme-light .details-section { border-top-color: rgba(15, 23, 42, 0.12); }
    .theme-light .details-actions {
      background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(248,250,252,0.95));
      border-color: rgba(15, 23, 42, 0.12);
      box-shadow: 0 12px 28px rgba(15, 23, 42, 0.1);
    }
    .theme-light .details-status-btn {
      border-color: rgba(15,23,42,0.14);
      background: rgba(15,23,42,0.04);
      color: #1e293b;
    }
    .theme-light .details-status-btn:hover {
      background: rgba(15,23,42,0.09);
      border-color: rgba(15,23,42,0.22);
    }
    .theme-light .details-status-btn.is-active {
      color: #f8fafc;
      box-shadow: 0 0 0 1px rgba(var(--accent-rgb),0.26), 0 12px 22px rgba(15,23,42,0.16);
    }
    .theme-light .details-status-btn.is-disabled {
      border-color: rgba(15,23,42,0.08);
      background: rgba(15,23,42,0.05);
      color: rgba(15,23,42,0.35);
    }
    .theme-dark .details-overlay {
      background: rgba(24, 24, 24, 0.64);
      backdrop-filter: blur(10px);
    }
    .theme-dark .details-surface {
      background:
        radial-gradient(120% 100% at 0% 0%, rgba(255, 255, 255, 0.05), transparent 58%),
        radial-gradient(120% 100% at 100% 0%, rgba(255, 255, 255, 0.04), transparent 60%),
        rgba(31, 31, 31, 0.94);
      border-color: rgba(148, 163, 184, 0.3);
      box-shadow: 0 28px 72px rgba(0, 0, 0, 0.55);
    }
    .theme-night .details-overlay {
      background: rgba(10, 15, 29, 0.65);
      backdrop-filter: blur(10px);
    }
    .theme-night .details-surface {
      background:
        radial-gradient(120% 100% at 0% 0%, rgba(30, 64, 175, 0.2), transparent 58%),
        radial-gradient(120% 100% at 100% 0%, rgba(15, 23, 42, 0.45), transparent 60%),
        rgba(12, 19, 36, 0.9);
      border-color: rgba(96, 165, 250, 0.24);
      box-shadow: 0 30px 72px rgba(2, 6, 23, 0.62);
    }
    .theme-black .details-overlay {
      background: rgba(0, 0, 0, 0.74);
      backdrop-filter: blur(10px);
    }
    .theme-black .details-surface {
      background:
        radial-gradient(130% 110% at 0% 100%, rgba(255,255,255,0.04), transparent 62%),
        rgba(0, 0, 0, 0.93);
      border-color: rgba(255,255,255,0.12);
      box-shadow: 0 32px 80px rgba(0, 0, 0, 0.8);
    }
    .theme-black .details-actions {
      background: linear-gradient(180deg, rgba(0,0,0,0.9), rgba(0,0,0,0.82));
      border-color: rgba(255,255,255,0.14);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.06), 0 16px 32px rgba(0,0,0,0.65);
    }
    @media (max-width: 768px) {
      .details-close {
        top: 10px !important;
        right: 10px !important;
        width: 40px;
        height: 40px;
        border-radius: 12px;
      }
      .details-close-icon {
        width: 16px;
        height: 16px;
      }
      .details-hero-content {
        padding: 40px 16px 12px;
      }
      .details-hero-head {
        gap: 12px;
        width: 100%;
      }
      .details-hero-head-in-hero .details-hero-copy {
        padding-right: 52px;
      }
      .details-hero-poster {
        width: 102px;
        border-radius: 14px;
      }
      .details-hero-title {
        font-size: clamp(1.06rem, 4.4vw, 1.42rem);
        line-height: 1.03;
        margin-bottom: 8px;
        overflow-wrap: normal;
        word-break: normal;
        hyphens: none;
      }
      .details-hero-stat {
        font-size: 15px;
      }
      .details-hero-genre {
        font-size: 11px;
        padding: 2px 8px;
      }
    }
    .theme-light .app-panel,
    .theme-light .app-panel-padded {
      border-color: rgba(15,23,42,0.12);
    }
    .theme-light .app-topbar {
      background: linear-gradient(180deg, rgba(241,245,249,0.72), rgba(241,245,249,0.52));
      border-bottom-color: rgba(15,23,42,0.12);
    }
    .theme-dark .app-topbar {
      background: linear-gradient(180deg, rgba(24, 24, 24, 0.76), rgba(31, 31, 31, 0.56));
      border-bottom-color: rgba(255,255,255,0.1);
    }
    .theme-night .app-topbar {
      background: linear-gradient(180deg, rgba(15, 23, 42, 0.76), rgba(15, 23, 42, 0.56));
      border-bottom-color: rgba(var(--accent-rgb),0.18);
    }
    .theme-black .app-topbar {
      background: linear-gradient(180deg, rgba(0,0,0,0.78), rgba(0,0,0,0.58));
      border-bottom-color: rgba(255,255,255,0.1);
    }
    .theme-light .app-nav-wrap,
    .theme-light .app-switch-wrap,
    .theme-light .catalog-controls,
    .theme-light .shelf-pill {
      border-color: rgba(15,23,42,0.12);
      background: rgba(255,255,255,0.7);
      color: #0f172a;
    }
    .theme-light .app-nav-btn.active,
    .theme-light .app-switch-btn.active,
    .theme-light .shelf-pill.active {
      background: rgba(15,23,42,0.14);
      color: #0f172a;
      border-color: rgba(15,23,42,0.18);
    }
    .theme-light .settings-choice {
      border-color: rgba(15,23,42,0.12);
      background: rgba(255,255,255,0.72);
    }
    .theme-light .settings-lang-choice {
      border-color: rgba(15,23,42,0.16);
      background: rgba(255,255,255,0.8);
    }
    .theme-light .settings-lang-choice:hover {
      border-color: rgba(15,23,42,0.24);
      background: rgba(255,255,255,0.92);
    }
    .theme-light .settings-lang-choice.active {
      background: linear-gradient(180deg, rgba(var(--accent-rgb),0.18), rgba(var(--accent-rgb),0.1));
      border-color: rgba(var(--accent-rgb),0.55);
    }
    .theme-light .settings-lang-code {
      border-color: rgba(15,23,42,0.18);
      background: rgba(241,245,249,0.95);
    }
    .theme-light .settings-lang-mark {
      border-color: rgba(15,23,42,0.2);
    }
    .theme-light .settings-notice {
      background: rgba(241,245,249,0.9);
      color: #0f172a;
    }
    .theme-light .settings-toggle {
      border-color: rgba(15,23,42,0.14);
      background: rgba(255,255,255,0.75);
    }
    .theme-light .settings-toggle-switch {
      background: rgba(148,163,184,0.3);
      border-color: rgba(15,23,42,0.2);
    }
    .theme-light .settings-toggle-dot {
      background: #fff;
    }
    .theme-light .settings-preview-box {
      background: rgba(241,245,249,0.9);
      border-color: rgba(15,23,42,0.12);
    }
    .theme-light .empty-state {
      background: rgba(255,255,255,0.78);
      border-color: rgba(15,23,42,0.16);
    }
    .theme-light .empty-state-action {
      border-color: rgba(var(--accent-rgb),0.45);
      background: rgba(var(--accent-rgb),0.14);
      color: #0f172a;
    }
    .theme-light .media-poster { box-shadow: 0 8px 22px rgba(15,23,42,0.16); }
    .theme-dark .app-nav-wrap,
    .theme-dark .app-switch-wrap,
    .theme-dark .catalog-controls,
    .theme-dark .shelf-pill {
      border-color: rgba(255,255,255,0.14);
      background: rgba(31,31,31,0.9);
    }
    .theme-night .app-nav-wrap,
    .theme-night .app-switch-wrap,
    .theme-night .catalog-controls,
    .theme-night .shelf-pill {
      border-color: rgba(100,116,139,0.3);
      background: rgba(15,23,42,0.58);
    }
    .theme-night .app-nav-btn.active,
    .theme-night .app-switch-btn.active,
    .theme-night .shelf-pill.active {
      background: rgba(var(--accent-rgb),0.3);
      border-color: rgba(var(--accent-rgb),0.48);
      color: #eff6ff;
    }

    @media (max-width: 900px) {
      .app-topbar { position: static; padding: 0.65rem 16px 0.5rem; }
      .app-nav-wrap { display: none; }
      .app-page-title { font-size: 2rem; }
      .media-title { font-size: 0.95rem; }
      .media-meta { font-size: 0.9rem; }
    }
    @media (max-width: 768px) {
      .mobile-bottom-nav {
        bottom: 8px;
        width: calc(100vw - 28px);
        max-width: 420px;
        justify-content: space-between;
        padding: 6px;
      }
      .mobile-bottom-nav > button {
        flex: 1 1 0%;
        min-width: 0;
        padding: 10px 4px !important;
      }
      .mobile-bottom-nav > button > span:first-child {
        font-size: 1.25rem !important;
      }
      .mobile-nav-label {
        font-size: 10px !important;
        line-height: 1.1;
        margin-top: 3px;
        letter-spacing: 0.015em;
      }
    }

    .seg-btn { background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.10); }
    .seg-btn.active { background: rgba(var(--accent-rgb),0.35); border-color: rgba(var(--accent-rgb),0.55); }

    .ep-btn {
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: 14px;
      padding: 10px 0;
      font-weight: 700;
      font-size: 12px;
      transition: transform 0.12s, background 0.12s, border 0.12s;
      user-select: none;
    }
    .ep-btn:hover { transform: translateY(-2px); }
    .ep-watched {
      background: rgba(16,185,129,0.18);
      border-color: rgba(16,185,129,0.35);
      color: #34d399;
    }

    /* Status badges */
    .status-badge {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 8px;
      font-size: 9px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .status-returning { background: rgba(34, 197, 94, 0.2); color: #22c55e; border: 1px solid rgba(34, 197, 94, 0.3); }
    .status-ended { background: rgba(239, 68, 68, 0.2); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.3); }
    .status-canceled { background: rgba(156, 163, 175, 0.2); color: #9ca3af; border: 1px solid rgba(156, 163, 175, 0.3); }
    .status-planned { background: rgba(var(--accent-rgb), 0.2); color: rgba(var(--accent-rgb),0.95); border: 1px solid rgba(var(--accent-rgb), 0.3); }
    .status-pilot { background: rgba(251, 191, 36, 0.2); color: #fbbf24; border: 1px solid rgba(251, 191, 36, 0.3); }

    details summary { cursor: pointer; }

    .season-list-wrap {
      display: grid;
      gap: 10px;
    }
    .season-card {
      border: 1px solid rgba(148, 163, 184, 0.24);
      border-radius: 20px;
      background: linear-gradient(108deg, rgba(30, 41, 59, 0.48), rgba(15, 23, 42, 0.64));
      overflow: hidden;
      transition: border-color 0.18s ease, background 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
    }
    .season-card:hover {
      border-color: rgba(var(--accent-rgb), 0.38);
      background: linear-gradient(108deg, rgba(30, 41, 59, 0.6), rgba(15, 23, 42, 0.76));
      box-shadow: 0 14px 28px rgba(2, 6, 23, 0.26);
    }
    .season-card[open] {
      border-color: rgba(var(--accent-rgb), 0.48);
      background: linear-gradient(108deg, rgba(30, 41, 59, 0.68), rgba(15, 23, 42, 0.82));
      box-shadow: 0 16px 32px rgba(2, 6, 23, 0.32);
    }
    .season-summary {
      list-style: none;
      min-height: 118px;
      padding: 0 14px 0 0;
    }
    .season-summary::marker,
    .season-summary::-webkit-details-marker {
      display: none;
    }
    .season-summary-main {
      display: flex;
      align-items: stretch;
      gap: 10px;
      min-width: 0;
      min-height: 118px;
    }
    .season-poster-wrap {
      width: 84px;
      height: auto;
      border-radius: 19px 0 0 19px;
      overflow: hidden;
      border-right: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(15, 23, 42, 0.45);
      flex-shrink: 0;
    }
    .season-poster-thumb {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .season-main {
      flex: 1;
      min-width: 0;
      padding: 8px 4px 8px 0;
      align-self: stretch;
      display: grid;
      grid-template-columns: minmax(0, 1fr);
      grid-template-rows: auto auto auto;
      row-gap: 4px;
    }
    .season-title-row {
      display: flex;
      align-items: center;
      gap: 13px;
      min-width: 0;
    }
    .season-title {
      font-size: 26px;
      font-weight: 850;
      letter-spacing: -0.01em;
      line-height: 1.05;
      white-space: nowrap;
    }
    .season-count {
      font-size: 18px;
      font-weight: 700;
      color: rgba(203, 213, 225, 0.68);
      flex-shrink: 0;
    }
    .season-state-chip {
      font-size: 10px;
      font-weight: 800;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      border: 1px solid transparent;
      border-radius: 9999px;
      padding: 2px 8px;
      white-space: nowrap;
    }
    .season-actions {
      flex-shrink: 0;
      min-width: 108px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 7px;
      align-self: center;
    }
    .season-state-not-started .season-state-chip {
      background: rgba(148, 163, 184, 0.16);
      border-color: rgba(148, 163, 184, 0.34);
      color: rgba(226, 232, 240, 0.82);
    }
    .season-state-in-progress .season-state-chip {
      background: rgba(var(--accent-rgb), 0.2);
      border-color: rgba(var(--accent-rgb), 0.42);
      color: rgba(230, 243, 255, 0.95);
    }
    .season-state-completed .season-state-chip {
      background: rgba(34, 197, 94, 0.2);
      border-color: rgba(34, 197, 94, 0.42);
      color: rgb(74, 222, 128);
    }
    .season-meta-row {
      margin-top: 1px;
      display: flex;
      align-items: center;
      gap: 9px;
      font-size: 12px;
      color: rgba(203, 213, 225, 0.58);
    }
    .season-progress-pct {
      margin-left: auto;
      font-size: 13px;
      font-weight: 800;
      color: rgba(241, 245, 249, 0.82);
    }
    .season-state-in-progress .season-progress-pct {
      color: rgba(var(--accent-rgb), 0.98);
    }
    .season-state-completed .season-progress-pct {
      color: rgb(74, 222, 128);
    }
    .season-progress-track {
      margin-top: 2px;
      align-self: start;
      transform: translateY(-2px);
      height: 7px;
      border-radius: 9999px;
      overflow: hidden;
      background: rgba(148, 163, 184, 0.24);
    }
    .season-progress-fill {
      height: 100%;
      width: 0;
      border-radius: 9999px;
      transition: width 0.3s ease, background 0.2s ease;
    }
    .season-state-not-started .season-progress-fill {
      background: linear-gradient(90deg, rgba(148, 163, 184, 0.42), rgba(148, 163, 184, 0.58));
    }
    .season-state-in-progress .season-progress-fill {
      background: linear-gradient(90deg, rgba(var(--accent-rgb), 0.72), rgba(var(--accent-rgb), 0.98));
    }
    .season-state-completed .season-progress-fill {
      background: linear-gradient(90deg, rgba(34, 197, 94, 0.88), rgba(74, 222, 128, 0.98));
    }
    .season-rate-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      width: 100%;
      min-height: 34px;
      padding: 8px 10px;
      border: 1px solid;
      border-radius: 12px;
      font-size: 10px;
      font-weight: 900;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      line-height: 1;
      transition: background 0.16s ease, border-color 0.16s ease, transform 0.16s ease, opacity 0.16s ease;
    }
    .season-rate-btn:not(:disabled):hover {
      transform: translateY(-1px);
    }
    .season-episodes-body {
      border-top: 1px solid rgba(148, 163, 184, 0.2);
      padding: 4px 14px 14px;
    }
    .season-card[open] .season-summary {
      background: rgba(15, 23, 42, 0.18);
    }
    .season-card[open] .season-episodes-body {
      animation: seasonPanelIn 0.2s ease both;
    }
    @keyframes seasonPanelIn {
      from { opacity: 0; transform: translateY(-4px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .theme-light .season-card {
      background: linear-gradient(108deg, rgba(255, 255, 255, 0.96), rgba(241, 245, 249, 0.9));
      border-color: rgba(15, 23, 42, 0.14);
    }
    .theme-light .season-card:hover {
      border-color: rgba(var(--accent-rgb), 0.34);
      background: linear-gradient(108deg, rgba(255, 255, 255, 0.99), rgba(241, 245, 249, 0.97));
      box-shadow: 0 12px 24px rgba(15, 23, 42, 0.14);
    }
    .theme-light .season-card[open] {
      border-color: rgba(var(--accent-rgb), 0.4);
      box-shadow: 0 14px 28px rgba(15, 23, 42, 0.18);
    }
    .theme-light .season-poster-wrap {
      border-right-color: rgba(15, 23, 42, 0.16);
      background: rgba(15, 23, 42, 0.08);
    }
    .theme-light .season-title {
      color: #0f172a;
    }
    .theme-light .season-count,
    .theme-light .season-meta-row {
      color: rgba(30, 41, 59, 0.62);
    }
    .theme-light .season-progress-pct {
      color: rgba(15, 23, 42, 0.82);
    }
    .theme-light .season-progress-track {
      background: rgba(15, 23, 42, 0.12);
    }
    .theme-light .season-state-not-started .season-state-chip {
      background: rgba(148, 163, 184, 0.18);
      border-color: rgba(148, 163, 184, 0.36);
      color: rgba(51, 65, 85, 0.82);
    }
    .theme-light .season-state-in-progress .season-state-chip {
      background: rgba(var(--accent-rgb), 0.14);
      color: rgba(var(--accent-rgb), 0.96);
    }
    .theme-light .season-state-completed .season-state-chip {
      background: rgba(34, 197, 94, 0.16);
      color: #16a34a;
    }
    .theme-light .season-rate-btn:not(:disabled) {
      color: #0f172a;
      background: rgba(15, 23, 42, 0.06);
      border-color: rgba(15, 23, 42, 0.16);
    }
    .theme-light .season-rate-btn:not(:disabled):hover {
      background: rgba(15, 23, 42, 0.1);
    }
    .theme-light .season-episodes-body {
      border-top-color: rgba(15, 23, 42, 0.1);
    }
    .theme-light .season-card[open] .season-summary {
      background: rgba(15, 23, 42, 0.05);
    }
    @media (max-width: 640px) {
      .season-summary {
        min-height: 100px;
        padding: 0 10px 0 0;
      }
      .season-summary-main {
        min-height: 100px;
        gap: 8px;
        align-items: stretch;
      }
      .season-poster-wrap {
        width: 70px;
        height: auto;
        border-radius: 15px 0 0 15px;
        margin-top: 0;
      }
      .season-main {
        padding: 8px 0 8px 0;
      }
      .season-title-row {
        flex-wrap: wrap;
        row-gap: 4px;
      }
      .season-title {
        font-size: 22px;
      }
      .season-count {
        font-size: 15px;
      }
      .season-state-chip {
        margin-left: 0;
      }
      .season-actions {
        min-width: 92px;
        gap: 6px;
      }
      .season-meta-row {
        gap: 7px;
      }
      .season-rate-btn {
        min-height: 32px;
        padding: 7px 8px;
        font-size: 9px;
      }
      .season-episodes-body {
        padding: 4px 10px 10px;
      }
    }

    /*  Animations  */

    /* Modal enter/exit */
    @keyframes modalOverlayIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes modalOverlayOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }
    @keyframes modalContentIn {
      from { opacity: 0; transform: translateY(32px) scale(0.97); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }
    @keyframes modalContentOut {
      from { opacity: 1; transform: translateY(0) scale(1); }
      to { opacity: 0; transform: translateY(32px) scale(0.97); }
    }
    .modal-enter { animation: modalOverlayIn 0.25s ease-out both; }
    .modal-enter > div > div { animation: modalContentIn 0.3s ease-out both; }
    .modal-exit { animation: modalOverlayOut 0.2s ease-in both; pointer-events: none; }
    .modal-exit > div > div { animation: modalContentOut 0.2s ease-in both; }

    /* Quick actions popup */
    @keyframes popIn {
      from { opacity: 0; transform: scale(0.92) translateY(-4px); }
      to { opacity: 1; transform: scale(1) translateY(0); }
    }
    .popup-enter > div:last-child { animation: popIn 0.18s ease-out both; }
    @keyframes skeletonSweep {
      from { transform: translateX(-110%); }
      to { transform: translateX(110%); }
    }

    /* Tab content transition */
    @keyframes tabFadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .tab-enter { animation: tabFadeIn 0.3s ease-out both; }

    /* Card stagger appearance */
    @keyframes cardReveal {
      from { opacity: 0; transform: translateY(18px) scale(0.97); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }
    .card-stagger {
      animation: cardReveal 0.4s ease-out both;
      animation-delay: calc(var(--stagger-i, 0) * 40ms);
    }

    /* TV progress bar in library */
    .tv-progress-bar {
      height: 3px;
      background: rgba(255,255,255,0.08);
      border-radius: 2px;
      overflow: hidden;
      margin-top: 8px;
    }
    .tv-progress-fill {
      height: 100%;
      border-radius: 2px;
      transition: width 0.5s ease;
    }
    .theme-light .tv-progress-bar { background: rgba(0,0,0,0.06); }

    /* Micro: add-to-library pulse */
    @keyframes addPulse {
      0% { transform: scale(1); }
      40% { transform: scale(1.06); box-shadow: 0 0 24px rgba(var(--accent-rgb), 0.35); }
      100% { transform: scale(1); box-shadow: none; }
    }
    .add-pulse { animation: addPulse 0.4s ease-out; }

    /* Micro: episode check bounce */
    @keyframes checkBounce {
      0% { transform: scale(1); }
      35% { transform: scale(1.25); }
      65% { transform: scale(0.95); }
      100% { transform: scale(1); }
    }
    .ep-bounce { animation: checkBounce 0.35s ease-out; }

    /* Micro: star fill delay */
    .star-animated {
      opacity: 0;
      animation: starFill 0.15s ease-out forwards;
      animation-delay: calc(var(--star-i, 0) * 60ms);
    }
    @keyframes starFill {
      from { opacity: 0; transform: scale(0.5); }
      to { opacity: 1; transform: scale(1); }
    }
    @media (max-width: 768px) {
      body:not(.reduce-motion) * {
        transition-duration: 0.14s !important;
        animation-duration: 0.22s !important;
      }
      .settings-section-head { top: 64px; }
    }
    .reduce-motion * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }

    /* Card hover overlay with info */
    .card-info-overlay {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 12px;
      z-index: 2;
      opacity: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.88) 0%, rgba(0,0,0,0.4) 50%, transparent 100%);
      transition: opacity 0.22s ease;
      pointer-events: none;
    }
    .media-card:hover .card-info-overlay { opacity: 1; }
    .card-info-overlay p { color: #fff; text-shadow: 0 1px 3px rgba(0,0,0,0.6); }
    .theme-light .card-info-overlay {
      background: linear-gradient(to top, rgba(2,6,23,0.92) 0%, rgba(2,6,23,0.46) 52%, transparent 100%);
    }
    .theme-light .card-info-overlay p {
      color: #f8fafc;
      text-shadow: 0 2px 4px rgba(2,6,23,0.72);
    }

    .catalog-skeleton-poster {
      background: linear-gradient(135deg, rgba(30,41,59,0.5), rgba(51,65,85,0.35));
    }
    .catalog-skeleton-shimmer {
      position: absolute;
      inset: 0;
      transform: translateX(-110%);
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.13), transparent);
      animation: skeletonSweep 1.3s ease-in-out infinite;
    }
    .catalog-skeleton-line {
      height: 11px;
      border-radius: 9999px;
      background: rgba(148,163,184,0.26);
      margin-top: 8px;
      margin-left: 4px;
    }
    .theme-light .catalog-skeleton-poster {
      background: linear-gradient(135deg, rgba(148,163,184,0.35), rgba(203,213,225,0.46));
    }
    .theme-light .catalog-skeleton-line {
      background: rgba(15,23,42,0.14);
    }
    .empty-state {
      text-align: center;
      padding: 3.4rem 1rem 3.2rem;
      border: 1px dashed rgba(148,163,184,0.34);
      border-radius: var(--radius-lg);
      background: rgba(255,255,255,0.02);
    }
    .empty-state.compact {
      padding: 2.4rem 1rem 2.2rem;
    }
    .empty-state-icon {
      font-size: 2rem;
      line-height: 1;
      opacity: 0.72;
      margin-bottom: 0.8rem;
    }
    .empty-state-title {
      font-size: 0.92rem;
      font-weight: 900;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      opacity: 0.86;
      margin-bottom: 0.38rem;
    }
    .empty-state-hint {
      font-size: 0.76rem;
      opacity: 0.55;
      margin-bottom: 1rem;
    }
    .empty-state-action {
      min-height: var(--control-height);
      padding: 0.68rem 1rem;
      border-radius: var(--radius-md);
      border: 1px solid rgba(var(--accent-rgb),0.35);
      background: rgba(var(--accent-rgb),0.18);
      font-size: 11px;
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      transition: background 0.16s ease, border-color 0.16s ease, transform 0.16s ease;
    }
    .empty-state-action:hover {
      background: rgba(var(--accent-rgb),0.28);
      border-color: rgba(var(--accent-rgb),0.55);
      transform: translateY(-1px);
    }
    .settings-section-head {
      position: sticky;
      top: 72px;
      z-index: 3;
      backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(2,6,23,0.82), rgba(2,6,23,0.72));
      border-top-left-radius: calc(var(--panel-radius) - 1px);
      border-top-right-radius: calc(var(--panel-radius) - 1px);
    }
    .settings-view .app-panel,
    .settings-view > .glass.rounded-3xl {
      overflow: visible;
    }
    .theme-light .settings-section-head {
      background: linear-gradient(180deg, rgba(248,250,252,0.9), rgba(241,245,249,0.82));
    }

/* Analytics view (stats tab) */
.analytics-layout {
  color: inherit;
}

.analytics-hero {
  border-radius: 28px;
  padding: clamp(18px, 3.4vw, 34px);
  border: 1px solid rgba(148, 163, 184, 0.24);
  background:
    radial-gradient(120% 120% at 0% 0%, rgba(148, 163, 184, 0.1), transparent 58%),
    linear-gradient(180deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
  box-shadow: 0 16px 38px rgba(2, 6, 23, 0.26);
}

.analytics-overline {
  font-size: 11px;
  letter-spacing: 0.16em;
  text-transform: uppercase;
  font-weight: 800;
  opacity: 0.62;
  margin-bottom: 8px;
}

.analytics-total-row {
  display: flex;
  align-items: baseline;
  gap: 10px;
  margin-bottom: 18px;
}

.analytics-total {
  font-size: clamp(2.2rem, 5.3vw, 4rem);
  line-height: 1;
  font-weight: 900;
  letter-spacing: -0.02em;
}

.analytics-total-caption {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.11em;
  font-weight: 700;
  opacity: 0.5;
}

.analytics-kpi-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
}

.analytics-kpi {
  border-radius: 16px;
  border: 1px solid rgba(148, 163, 184, 0.24);
  background: rgba(255, 255, 255, 0.04);
  padding: 14px;
}

.analytics-kpi-value {
  font-size: 1.35rem;
  line-height: 1.1;
  font-weight: 900;
}

.analytics-kpi-label {
  margin-top: 5px;
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.09em;
  opacity: 0.56;
  font-weight: 800;
}

.analytics-section {
  border-radius: 26px;
  border: 1px solid rgba(148, 163, 184, 0.22);
  background: rgba(255, 255, 255, 0.03);
  overflow: hidden;
}

.analytics-section-head {
  padding: 16px 20px;
  border-bottom: 1px solid rgba(148, 163, 184, 0.18);
}

.analytics-section-title {
  font-size: 1.05rem;
  font-weight: 900;
  letter-spacing: 0.01em;
}

.analytics-metric-grid {
  display: grid;
  gap: 10px;
  padding: 16px 18px 0;
}

.analytics-metric-grid-movies {
  grid-template-columns: repeat(2, minmax(0, 1fr));
}

.analytics-metric-grid-tv {
  grid-template-columns: repeat(3, minmax(0, 1fr));
}

.analytics-metric-card {
  border-radius: 14px;
  border: 1px solid rgba(148, 163, 184, 0.2);
  background: rgba(255, 255, 255, 0.04);
  padding: 12px;
}

.analytics-metric-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  font-weight: 800;
  opacity: 0.56;
  margin-bottom: 4px;
}

.analytics-metric-value {
  font-size: 1.35rem;
  line-height: 1.1;
  font-weight: 900;
}

.analytics-meta-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
  padding: 10px 18px 0;
}

.analytics-meta-grid-tv {
  grid-template-columns: repeat(4, minmax(0, 1fr));
}

.analytics-meta-card {
  border-radius: 14px;
  border: 1px solid rgba(148, 163, 184, 0.18);
  background: rgba(255, 255, 255, 0.03);
  padding: 12px;
}

.analytics-meta-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  font-weight: 800;
  opacity: 0.56;
  margin-bottom: 5px;
}

.analytics-meta-value {
  font-size: 1rem;
  font-weight: 800;
}

.analytics-meta-subtle {
  margin-top: 2px;
  font-size: 11px;
  opacity: 0.45;
}

.analytics-block {
  padding: 12px 18px 0;
}

.analytics-block:last-child {
  padding-bottom: 16px;
}

.analytics-block-title {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.09em;
  font-weight: 800;
  opacity: 0.58;
  margin-bottom: 10px;
}

.analytics-chart-wrap {
  border-radius: 16px;
  border: 1px solid rgba(148, 163, 184, 0.2);
  background: rgba(255, 255, 255, 0.03);
  padding: 8px;
}

.analytics-list {
  display: grid;
  gap: 8px;
}

.analytics-list-row {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 10px;
  border-radius: 14px;
  border: 1px solid rgba(148, 163, 184, 0.2);
  background: rgba(255, 255, 255, 0.03);
  padding: 8px 10px;
  text-align: left;
  transition: background 0.2s ease, border-color 0.2s ease;
}

.analytics-list-row:hover {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(148, 163, 184, 0.34);
}

.analytics-list-rank {
  width: 20px;
  text-align: center;
  font-size: 12px;
  font-weight: 800;
  opacity: 0.44;
}

.analytics-list-poster {
  width: 32px;
  height: 46px;
  border-radius: 8px;
  object-fit: cover;
  flex-shrink: 0;
  background: rgba(148, 163, 184, 0.16);
}

.analytics-list-poster-empty {
  border: 1px dashed rgba(148, 163, 184, 0.38);
}

.analytics-list-main {
  min-width: 0;
  flex: 1;
  display: flex;
  flex-direction: column;
}

.analytics-list-title {
  font-size: 0.86rem;
  font-weight: 800;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.analytics-list-subtitle {
  font-size: 11px;
  opacity: 0.44;
}

.analytics-list-score {
  border-radius: 10px;
  border: 1px solid rgba(201, 166, 102, 0.45);
  background: rgba(201, 166, 102, 0.18);
  color: rgba(241, 226, 192, 0.95);
  font-size: 11px;
  font-weight: 800;
  padding: 4px 8px;
  flex-shrink: 0;
}

.analytics-chip-wrap {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.analytics-chip {
  border-radius: 999px;
  border: 1px solid rgba(148, 163, 184, 0.3);
  background: rgba(255, 255, 255, 0.03);
  padding: 4px 10px;
  font-size: 11px;
  font-weight: 700;
  opacity: 0.85;
}

.theme-light .analytics-hero,
.theme-light .analytics-section,
.theme-light .analytics-kpi,
.theme-light .analytics-metric-card,
.theme-light .analytics-meta-card,
.theme-light .analytics-chart-wrap,
.theme-light .analytics-list-row,
.theme-light .analytics-chip {
  background: rgba(255, 255, 255, 0.86);
  border-color: rgba(15, 23, 42, 0.16);
}

.theme-light .analytics-list-score {
  border-color: rgba(146, 108, 38, 0.35);
  background: rgba(146, 108, 38, 0.12);
  color: rgba(78, 58, 20, 0.92);
}

@media (max-width: 900px) {
  .analytics-kpi-grid,
  .analytics-meta-grid,
  .analytics-meta-grid-tv {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .analytics-metric-grid-tv {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (max-width: 580px) {
  .analytics-total-row {
    flex-direction: column;
    align-items: flex-start;
    gap: 4px;
  }

  .analytics-kpi-grid,
  .analytics-metric-grid-movies,
  .analytics-metric-grid-tv,
  .analytics-meta-grid,
  .analytics-meta-grid-tv {
    grid-template-columns: 1fr;
  }
}

/* Details tabs */
.details-tabs-wrap {
  border-bottom: 1px solid rgba(148, 163, 184, 0.2);
  min-height: 60px;
  display: flex;
  align-items: flex-end;
  padding: 0 0 8px;
}
.details-tabs-wrap.hero-tight {
  margin-top: 0;
}
.details-tabs {
  display: inline-flex;
  align-items: center;
  gap: 2px;
  max-width: 100%;
  overflow-x: auto;
  padding: 5px;
  border-radius: 14px;
  border: 1px solid rgba(148, 163, 184, 0.34);
  background: linear-gradient(180deg, rgba(15, 23, 42, 0.64) 0%, rgba(15, 23, 42, 0.5) 100%);
  backdrop-filter: blur(8px);
}
.details-tabs-wrap.hero-tight .details-tabs {
  transform: translateY(-14px);
}
.details-tab {
  flex: 0 0 auto;
  border: 1px solid transparent;
  background: transparent;
  color: rgba(226, 232, 240, 0.9);
  border-radius: 11px;
  padding: 8px 14px;
  font-size: 12px;
  font-weight: 800;
  letter-spacing: 0.02em;
  transition: all 0.16s ease;
}
.details-tab:hover { background: rgba(255,255,255,0.08); }
.details-tab.active {
  background: rgba(var(--accent-rgb), 0.26);
  border-color: rgba(var(--accent-rgb), 0.52);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.18);
}
.details-tab-panel { min-height: 220px; }
.details-trailer-frame {
  width: 100%;
  aspect-ratio: 16 / 9;
  border-radius: 18px;
  overflow: hidden;
  border: 1px solid rgba(148, 163, 184, 0.28);
  background: rgba(2, 6, 23, 0.7);
}

.theme-light .details-tabs-wrap {
  border-bottom-color: rgba(15, 23, 42, 0.16);
}
.theme-light .details-tabs {
  border-color: rgba(15, 23, 42, 0.24);
  background: rgba(255,255,255,0.86);
}
.theme-light .details-tab {
  color: rgba(51, 65, 85, 0.9);
}
.theme-light .details-tab:hover { background: rgba(15, 23, 42, 0.09); }
.theme-light .details-tab.active {
  background: rgba(var(--accent-rgb), 0.16);
  border-color: rgba(var(--accent-rgb), 0.36);
  color: rgba(var(--accent-rgb), 0.98);
}
.theme-light .details-trailer-frame {
  border-color: rgba(15, 23, 42, 0.16);
  background: rgba(15, 23, 42, 0.08);
}

@media (max-width: 640px) {
  .details-tabs-wrap {
    min-height: auto;
    align-items: stretch;
    padding: 0 0 8px;
  }
  .details-tabs-wrap.hero-tight .details-tabs {
    transform: none;
  }
  .details-tabs {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    width: 100%;
    gap: 7px;
    overflow-x: visible;
    padding: 0;
    border: 0;
    border-radius: 0;
    background: transparent;
    backdrop-filter: none;
  }
  .details-tab {
    width: 100%;
    min-height: 36px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 10px;
    border: 1px solid rgba(148, 163, 184, 0.34);
    background: rgba(15, 23, 42, 0.42);
    text-align: center;
    white-space: normal;
    line-height: 1.14;
    padding: 7px 10px;
    font-size: 11px;
    letter-spacing: 0.01em;
  }
  .details-tab:last-child:nth-child(odd) {
    grid-column: 1 / -1;
  }
  .theme-light .details-tab {
    border-color: rgba(15, 23, 42, 0.18);
    background: rgba(255, 255, 255, 0.85);
    color: rgba(30, 41, 59, 0.95);
  }
}
